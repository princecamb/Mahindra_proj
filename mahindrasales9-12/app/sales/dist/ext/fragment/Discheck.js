sap.ui.define(["sap/m/MessageToast","sap/m/MessageBox"],function(e,t){"use strict";return{formatter:{formatText:function(e,t){debugger;console.log("Discount:",e,"isChecked:",t);if(e?.includes("%"))return true;else if(t)return true;return false}},onCheckBoxSelect:function(e){debugger;var t=this._view.mAggregations.content[0].mAggregations.sections[3].mAggregations._grid.mAggregations.content[1].mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.items;let r=e.getSource().getParent().getParent().getParent().getParent().getParent().getParent().getParent().getBindingContext();let g;let o;const s=e.getSource().getSelected();const n=e.getSource().getBindingContext();const i=n.getProperty("mDiscount");const a=i.includes("%")?parseFloat(i.slice(0,-1)):parseFloat(i)||0;const c=parseFloat(n.getProperty("actualPrice"));const l=parseInt(n.getProperty("taxPercentage"));const u=n.getProperty("band")?.match(/\(([\d.]+)%\)/);let d=u?.[1]?parseFloat(u[1]):0;if(s&&a+d>=100){sap.m.MessageToast.show("Discount percentage cannot exceed 100.");e.getSource().setSelected(false);return}n.setProperty("isChecked",s);if(d>0){if(a>0&&s)d=d+a;g=c*((100-d)/100);if(a>0&&!s)g=g-a}else if(a>0&&s){g=c*((100-a)/100)}else if(a>0&&!s){g=c-a}else{g=c}o=g+g*(l/100);n.setProperty("discountedPrice",g.toFixed(2).toString());n.setProperty("totalPrice",o.toFixed(2).toString());debugger;let m=0;let P=0;let p=0;debugger;var f=e.getSource().getParent().getParent().getParent().getRows();for(const e of f){debugger;const t=e.getCells?e.getCells():e.getAggregation("content");debugger;var x=parseFloat(t[5].getText());var S=parseFloat(t[9].getText());var A=parseFloat(t[11].getText());if(x&&S&&A){m=m+S;P=P+(A-S)}}p=m+P;t[0].mAggregations.items[1].setText(m.toFixed(2).toString());t[1].mAggregations.items[1].setText(P.toFixed(2).toString());t[2].mAggregations.items[1].setText(p.toFixed(2).toString());if(i===""||i==="0"){n.setProperty("mDiscount",i);return}if(s&&!i.includes("%")){n.setProperty("mDiscount",`${i}%`)}else if(!s&&i.includes("%")){n.setProperty("mDiscount",i.slice(0,-1))}}}});
//# sourceMappingURL=Discheck.js.map